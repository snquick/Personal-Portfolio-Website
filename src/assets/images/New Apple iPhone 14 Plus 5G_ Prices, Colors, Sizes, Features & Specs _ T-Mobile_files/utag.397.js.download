//tealium universal tag - utag.397 ut4.0.202209291847, Copyright 2022 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(1){(function(c,serv,cfg,conditions,w,r){var u=c.util,obj=c.object,logs=[],_loaded=0,_events=[];var lg=w.ta&&ta.lg?ta.lg:(w.ta&&ta.tmoLog?ta.tmoLog:console);function track(url,conds){if(w.ta&&ta.donotsell){var n=ta.donotsell;if("function"==typeof n.isBlocked&&n.isBlocked(n.tags().bing||"bing"))return;}
c.loader.script(r,null,function(){try{if(u.isFunction(w.UET)){w.uetq=new UET({ti:cfg&&c.util.getDefined("bng.id",cfg)||"5038803",q:w.uetq});w.uetq.push("pageLoad");logs.push({info:{details:{action:"pageLoad"}}});_loaded=1;while(_events.length){add.apply(null,_events.shift());}}else{lg.Log&&lg.Log('bing:UET not defined');}}catch(ex){lg.Log&&lg.Log('bing err'+ex);}});serv.bindConditions(conds||conditions,function(condition){condition.vars.forEach(function(v){add(v.type,v.action,v.details);});},url);}
function add(){if(w.ta&&ta.donotsell){var n=ta.donotsell;if("function"==typeof n.isBlocked&&n.isBlocked(n.tags().bing||"bing"))return;}
if(_loaded){var args=[].slice.call(arguments).filter(function(ele){return ele!==undefined;});args=obj.clone(args);logs.push({info:{details:args}});return w.uetq.push.apply(w.uetq,args);}
return _events.push(arguments);}
function eventHandler(e,data){try{if(!data||!u.isArray(data.process))return;e=e||{};data.process.filter(function(p){return c.url.match(p.urlPattern,(e.detail&&e.detail.url))&&(!p.dates||(p.dates&&!c.date.isBetween(p.dates.start,p.dates.end)));}).forEach(function(p){e.data=p;if(u.isArray(p.vars)&&serv.preProc(p.preProc,e)){p.vars.forEach(function(v){v.eventDetail=e.detail;add(v.type,v.action,v.details);});}});}catch(ex){lg.Log&&lg.Log('bing eventHandler err '+ex);}}
u.create("bng",ta,{track:track,logs:logs,service:{eventHandler:eventHandler}});})(ta.core,ta.traffic.service,ta.config,ta.bng.conditions||[],window,"//bat.bing.com/bat.js");}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(c,serv,w){var _loaded=0,logs=[],_id,_pageViewed={},config={global:{transport_type:"beacon"},url:"//www.googletagmanager.com/gtag/js?id="};function init(id,globalOptions){if(id&&!_loaded){c.loader.script(config.url+id);logs.push({id:id,info:{script:config.url+id}});w.dataLayer=w.dataLayer||[];w.gtag=function(){w.dataLayer.push(arguments);logs.push({id:_id,info:{details:arguments}});};if(serv.doNotTrack()){w.gtag("set","allow_ad_personalization_signals",false);}
w.gtag("js",new Date());w.gtag("set",c.object.merge(config.global,globalOptions));_loaded=1;}}
function track(data,options){if(!data||!data.id){logs.push({error:"ID is required"});return;}
options=options||{};options.autoPageView=c.util.isBoolean(options.autoPageView)?options.autoPageView:true;_id=data.id;init(_id,options.global);if(!_pageViewed[_id]&&options.autoPageView){w.gtag("config",_id);_pageViewed[_id]=1;}
switch(data.type){case"config":w.gtag(data.type,data.id,data.details);break;case"event":w.gtag(data.type,data.action,data.details);break;default:break;}}
c.util.create("gtag",ta,{config:config,logs:logs,track:track});})(ta.core,ta.common.service,window);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(c,serv,mapper,conds,gtag){if(!c||!serv||!mapper||!gtag)return;var u=c.util,o=c.object,logs=[],config={id:{prefix:"UA",account:71671299,prop:16,get fullId(){return[this.prefix,this.account,this.prop].join("-");}},options:{autoPageView:false}};function conditionHandler(conditions,url){serv.bindConditions(conditions,function(condition){condition.vars.forEach(function(data){track(url,data);});},url);}
function mapData(data){var dat=(data&&o.clone(data))||{};dat.details=dat.details||{};dat.id=o.merge(config.id,dat.id).fullId;dat.details=o.merge(dat.details,mapper.mapToData(dat.mapData,dat.eventDetail));return dat;}
function track(url,data,options){options=o.merge(config.options,options);data=mapData(data);if(data.type){data.type==="event"&&u.create("details.send_to",data,data.id);gtag.track(data,options);logs.push({info:{details:data,options:options}});}else{conditionHandler(conds,url);}}
u.create("ga",ta,{config:config,logs:logs,service:{conditionHandler:conditionHandler},track:track});})(ta.core,ta.traffic.service,ta.common.mapper(ta.ga.map.default),ta.ga.conditions||[],ta.gtag);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(u){var id="DC-998766",delimiter="/",postfix="+standard",userType={customer:"customer",prospect:"prospect"},platform={mobile:"mobile",desktop:"desktop"};u.create("ta.fl").config={id:id,delimiter:delimiter,postfix:postfix,userType:userType,platform:platform};})(ta.core.util);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(c,mapper,fl,commServ,traffServ,pdlServ,gtag){if(!c||!mapper||!fl||!fl.config||!commServ||!traffServ||!pdlServ||!gtag)return;var idPrefix="DC-",u=c.util,o=c.object,str=c.string,cfg=fl.config,logs=fl.logs||(fl.logs=[],fl.logs),self,map=mapper.defaultMap;function getCustomVars(data){var uMap=data.map||{},cv={};for(var prop in map){if(o.has(map,prop)){if(u.exists(uMap[prop])){cv[prop]=uMap[prop];}else if(map[prop]&&c.util.isString(map[prop])){cv[prop]=map[prop];}else{mapper.fill(prop,data,self,cv);}}}
return cv;}
function getFormattedUrl(){return((c.url.location.subdomain||c.url.location.domain)+
str.rtrim(c.url.location.pathname,"/"));}
function getSendTo(id,type,cat,postfix){return(id+cfg.delimiter+type+cfg.delimiter+cat+(postfix||cfg.postfix));}
function injectTraffic(vars,data){if(window.ta&&ta.donotsell){var n=ta.donotsell;if("function"==typeof n.isBlocked&&n.isBlocked(n.tags().doubleclick||"doubleclick"))return;}
data=data||{};var outData=getCustomVars(data);for(var i=0,l=vars.length;i<l;i++){var v=vars[i],id=v.id&&u.isString(v.id)?(str.startsWith(v.id,idPrefix)?v.id:idPrefix+v.id):cfg.id;!v.isSales&&delete outData.items;outData.allow_custom_scripts=true;outData.send_to=getSendTo(id,v.type,v.cat,v.postfix);var data={id:id,type:"event",action:v.action||"conversion",details:outData};gtag.track(data);logs.push({info:{details:data}});}
return outData;}
function eventHandler(e,data){if(!data||!u.isArray(data.process))return;e=e||{};data.process.filter(function(p){return c.url.match(p.urlPattern,(e.detail&&e.detail.url))&&(!p.dates||(p.dates&&!c.date.isBetween(p.dates.start,p.dates.end)));}).forEach(function(p){e.data=p;if(u.isArray(p.vars)&&traffServ.preProc(p.preProc,e)){var result=injectTraffic(p.vars,e.detail);traffServ.postProc(result,p.postProc);}});}
function getOrd(){return pdlServ.getOrd()||commServ.getGuid();}
function track(conditions,url){if(window.ta&&ta.donotsell){var n=ta.donotsell;if("function"==typeof n.isBlocked&&n.isBlocked(n.tags().doubleclick||"doubleclick"))return;}
traffServ.bindConditions(conditions,function(condition,e){injectTraffic(condition.vars);},url);}
self=u.create("fl.service",ta,{getData:pdlServ.getLatest,getPlanIds:pdlServ.getPlanIds,getDeviceIds:pdlServ.getDeviceIds,getServiceIds:pdlServ.getServiceIds,getAccessoryIds:pdlServ.getAccessoryIds,getPurchaseInfo:pdlServ.getPurchaseInfo,getPrd:pdlServ.getPrd,getFormattedUrl:getFormattedUrl,getOrd:getOrd,getSendTo:getSendTo,eventHandler:eventHandler,track:track,injectTraffic:injectTraffic});})(ta.core,new ta.common.mapper(ta.fl.map.default),ta.fl,ta.common.service,ta.traffic.service,ta.pdl.default.service,ta.gtag);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(u,serv,cond){if(!serv)return;u.create("fl",ta,{track:function(url){if(window.ta&&ta.donotsell){var n=ta.donotsell;if("function"==typeof n.isBlocked&&n.isBlocked(n.tags().doubleclick||"doubleclick"))return;}
return serv.track(cond||[],url);}});})(ta.core.util,ta.fl.service,ta.fl.conditions||[]);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(c,serv,conds,gtag){if(!c||!serv||!gtag)return;var u=c.util,o=c.object,logs=[],config={id:{prefix:"AW",account:872830939,get fullId(){return[this.prefix,this.account].join("-");}}};function conditionHandler(conditions,url){serv.bindConditions(conditions,function(condition){condition.vars.forEach(function(data){track(url,data);});},url);}
function mapData(data){var dat=(data&&o.clone(data))||{};dat.details=dat.details||{};dat.id=o.merge(config.id,dat.id).fullId;return dat;}
function track(url,data,options){options=o.merge(config.options,options);data=mapData(data);if(data.type){data.type==="event"&&u.create("details.send_to",data,data.id+"/"+data.label);gtag.track(data,options);logs.push({info:{details:data,options:options}});}else{conditionHandler(conds,url);}}
u.create("gaw",ta,{config:config,logs:logs,service:{conditionHandler:conditionHandler},track:track});})(ta.core,ta.traffic.service,ta.gaw.conditions||[],ta.gtag);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(core,lg){function fireLRTag(eml,phn,ref){if(!ref)return;var lrTag="//sr.rlcdn.com/"+ref;if(eml&&phn){lrTag+=(".html?s256="+eml+"&spn="+phn);core.loader.iframe(lrTag);}else if(eml){lrTag+=(".html?s256="+eml);core.loader.iframe(lrTag);}else if(phn){lrTag+=(".html?spn="+phn);core.loader.iframe(lrTag);}else{return;}}
function track(){try{if(window.ta&&ta.donotsell&&"function"==typeof ta.donotsell.isBlocked&&ta.donotsell.isBlocked(ta.donotsell.tags().liveramp||"liveramp"))return;var REFERRER='468006',eml,phn;var isTag=core.cookie.get("l_r");if(isTag&&(isTag+''=='1')){lg.Log('Livermap track() is already fired for user');return;}
var dta=core.cookie.get("t_cst");if(dta){var ary=dta.split('||');if(ary&&ary.length>1){eml=ary[1]||"";phn=ary[0]||"";if((!isTag||(isTag+''!='1'))||(/(account.t-mobile.com|choose-account)/i.test(document.referrer)&&!(/choose-account/i.test(location.pathname)))){fireLRTag(eml,phn,REFERRER);ta.core.cookie.set("l_r",'1',0,"/",".t-mobile.com");}}}else{lg.Log('Livermap track(): cookie does not exist ');}}catch(ex){lg.Log('Livermap track(): err ',ex);}}
core.util.create("liveramp",ta,{track:track});})(ta.core,ta.tmoLog||{Log:console.log});}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(c,w){c.util.create("ta.googleRemarketing",null,{id:993200303,track:function(){function isEnable(){try{if(window.ta&&ta.donotsell){var n=ta.donotsell;if("function"==typeof n.isBlocked&&n.isBlocked(n.tags().googleremarketing||"googleremarketing")){return!1;}}}catch(e){}
return!0;}
var fn=function(o){return function(){isEnable()&&typeof w.google_trackConversion=="function"&&w.google_trackConversion(o);};}({"google_conversion_id":w.ta.googleRemarketing.id,"google_remarketing_only":true,"google_custom_params":w.google_tag_params,"google_conversion_label":"I1MdCJGIsQUQr5HM2QM"});isEnable()&&(!c.util.isFunction(w.google_trackConversion)?c.loader.script("//www.googleadservices.com/pagead/conversion_async.js",null,function(a){return a;}(fn)):fn());}});})(ta.core,window);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(c,serv,conds,w){var u=c.util,config={url:"//s.pinimg.com/ct/core.js"},_loaded=0,_queue=[],logs=[];function conditionHandler(conditions,url){serv.bindConditions(conditions,function(condition,e){condition.vars.forEach(function(v){track(url,v);});},url);}
function send(action,value,url){w.pintrk(action,value);var _d={action:action,url:url||c.url.location.href};logs.push({info:{details:value?(_d.value=value,_d):_d}});}
function isValid(data){return data&&data.action;}
function track(url,data){if(w.ta&&ta.donotsell){var n=ta.donotsell;if("function"==typeof n.isBlocked&&n.isBlocked(n.tags().pinterest||"pinterest"))return;}
if(w.pintrk&&_loaded){(isValid(data)||conditionHandler(conds,url))&&send(data.action,data.value,url);}else if(w.pintrk){isValid(data)&&_queue.push(data);}else{w.pintrk=function(){w.pintrk.queue.push(Array.prototype.slice.call(arguments));};var n=w.pintrk;(n.queue=[]),(n.version="3.0");isValid(data)&&_queue.push(data);c.loader.script(config.url,null,function(){_loaded=1;conditionHandler(conds,url);while(_queue.length){var q=_queue.shift();send(q.action,q.value,url);}});}}
u.create("pinterest",ta,{config:config,logs:logs,service:{conditionHandler:conditionHandler},track:track});})(ta.core,ta.traffic.service,(ta.pinterest&&ta.pinterest.conditions)||[],window);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(c,serv,convt,conds){var u=c.util,logs=[],config={url:"//pxl.jivox.com/tags/{0}/pxjs.php"};function conditionHandler(conditions,url){serv.bindConditions(conditions,function(condition,e){condition.vars.forEach(function(v){track(url,v);});},url);}
function track(url,data){try{if(window.ta&&ta.donotsell&&"function"==typeof ta.donotsell.isBlocked&&ta.donotsell.isBlocked(ta.donotsell.tags().jivox||"jivox"))return;var _url=(u.isDefined("params.px",data)&&(c.string.format(config.url,data.type)+"?"+convt.object.toQueryString(data.params)))||conditionHandler(conds,url);_url&&(c.loader.script(_url)||logs.push({info:{details:{url:_url}}}));}catch(ex){}}
u.create("jivox",ta,{logs:logs,config:config,service:{conditionHandler:conditionHandler},track:track});})(ta.core,ta.traffic.service,ta.converter,(ta.jivox&&ta.jivox.conditions)||[]);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(w,c,lg){var u=c.util,o=c.object,logs=[],_url='//mov.t-mobile.com/p/js/1.js';function track(){try{if(w.ta&&ta.donotsell&&"function"==typeof ta.donotsell.isBlocked&&ta.donotsell.isBlocked(ta.donotsell.tags().movableInk||"movableInk"))return;if(typeof w['MovableInkTrack']!=='undefined'){return;}
w['MovableInkTrack']='mitr';w['mitr']=w['mitr']||function(){(w['mitr'].q=w['mitr'].q||[]).push(arguments);};_url&&(c.loader.script(_url)||logs.push({info:{details:{url:_url}}}));}catch(ex){}}
function eventHandler(e,data){try{if(!data)
return;if(o.has(this,data.service)&&u.isFunction(this[data.service])){this[data.service](e);}}catch(e){}}
function purchase(e){try{if(!(e&&(e.type==="MYTMO_Order_Confirm")))
return;var prodsPurchase=u.getDefined("cart.product",digitalData),totPr=0,pr=0;if(u.isArray(prodsPurchase)){if(/tmobile\.uno/i.test(w.utag.id)){prodsPurchase.forEach((prd)=>{if(prd){p=prd&&prd.productInfo?prd.productInfo:prd;if(p){pr=parseFloat((p.dueToday||p.dueMonthly||p.listRetailPrice)||0).toFixed(2);if(p.id){totPr+=parseFloat(pr);mitr('addProduct',[{'sku':p.id,'name':p.name||"",'item_price':pr,'quantity':p.qty||1}]);}}}});if(digitalData.cart&&digitalData.cart.order&&digitalData.cart.order.id){mitr('send','conversion',{'revenue':totPr||0,'identifier':digitalData.cart.order.id});}}else if(/tmobile\.nextgen/i.test(w.utag.id)){for(var k=0,plen=prodsPurchase.length;k<plen;k++){var prodPurchase=prodsPurchase[k];if(prodPurchase){var purchaseContent=[],pr=(prodPurchase.price&&(prodPurchase.price.dueMonthly||prodPurchase.price.dueToday||prodPurchase.price.listRetailPrice))||0;totPr+=pr;prodPurchase.id&&purchaseContent.push({sku:prodPurchase.id||(prodPurchase.attributes&&prodPurchase.attributes.sku),name:prodPurchase.name||"",item_price:pr,quantity:(prodPurchase.attributes&&prodPurchase.attributes.quantity)||1})&&mitr('addProduct',purchaseContent);}}
if(u.getDefined("cart.price.total.dueMonthly",digitalData)&&u.getDefined("transaction.transactionID",digitalData)){var purchaseInfo={revenue:totPr||0,identifier:digitalData.transaction.transactionID};purchaseInfo&&mitr('send','conversion',purchaseInfo);}}}}catch(ex){lg.Log("movable ink tag injecting err",ex);}}
u.create("movableInk",ta,{track:track,service:{eventHandler:eventHandler,purchase:purchase}});})(window,ta.core,window.ta&&window.ta.tmoLog?window.ta.tmoLog:{Log:console.log});}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("397","tmobile.uno-aa");}catch(error){utag.DB(error);}
