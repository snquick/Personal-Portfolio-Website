!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["msg-v1-static-assets"]=t():e["msg-v1-static-assets"]=t()}(this,(function(){return(this.webpackChunkmsg_v1_static_assets=this.webpackChunkmsg_v1_static_assets||[]).push([[644],{613:e=>{e.exports=Object.freeze({OTPSubstring:"onetimepayment",OTPSuccessURL:"payments/onetimepayment/confirmation?sidecar=true",OTPSuccessHeadingDomTestId:"otp-confirmation-dataAuthoring-pageHeader",OTPSuccessBodyDomTestId:"otp-confirmation-pageDescription",OTPFailureURL:"payments/onetimepayment/error?sidecar=true",OTPFailureHeadingDomTestId:"page-heading",OTPFailureBodyDomTestId:"page-body",autoPaySubstring:"autopay",autoPaySuccessURL:"payments/autopay/confirm?sidecar=true",autoPaySuccessHeadingDomTestId:"confirmation-heading",autoPaySuccessCardTextDomTestId:"confirmation-card-payment-text",autoPaySuccessBankTextDomTestId:"confirmation-bank-payment-text",autoPayFailureURL:"payments/autopay/error?sidecar=true",autoPayFailureHeadingDomTestId:"page-heading",autoPayFailureBodyDomTestId:"page-body",autoPayCancelURL:"payments/autopay/cancel-confirmation?sidecar=true",autoPayCancelHeadingDomTestId:"confirmation-heading",autoPayCancelBodyDomTestId:"autopay-discount-text",PASubstring:"paymentarrangement",PASuccessURL:"payments/paymentarrangement/confirmation?sidecar=true",PASuccessHeadingDomTestId:"pa-confirmation-success-msg-header-text",PAFailureURL:"payments/paymentarrangement/error?sidecar=true",PAFailureHeadingDomTestId:"page-heading",PAFailureBodyDomTestId:"page-body"})},570:(e,t,a)=>{const{httpPopPost:n}=a(602),s=a(613);t.generateRequestBody=async e=>{const t=Date.now();let a={conversationId:null,eventName:"",eventStatus:"",eventPayload:{heading:"",message:"",sidecarUrl:e},trackingId:t,timestamp:t};return e.includes(s.OTPSubstring)?e.includes(s.OTPSuccessURL)?(a.eventName="OTP",a.eventStatus="SUCCESS",a.eventPayload.heading=await o(s.OTPSuccessHeadingDomTestId),a.eventPayload.message=await o(s.OTPSuccessBodyDomTestId)):e.includes(s.OTPFailureURL)?(a.eventName="OTP",a.eventStatus="FAILURE",a.eventPayload.message=await o(s.OTPFailureBodyDomTestId),a.eventPayload.heading=await o(s.OTPFailureHeadingDomTestId)):a=null:e.includes(s.autoPaySubstring)?e.includes(s.autoPaySuccessURL)?(a.eventName="AUTOPAY",a.eventStatus="SUCCESS",a.eventPayload.heading=await o(s.autoPaySuccessHeadingDomTestId),a.eventPayload.message=await o(s.autoPaySuccessBankTextDomTestId)||await o(s.autoPaySuccessCardTextDomTestId)):e.includes(s.autoPayFailureURL)?(a.eventName="AUTOPAY",a.eventStatus="FAILURE",a.eventPayload.message=await o(s.autoPayFailureBodyDomTestId),a.eventPayload.heading=await o(s.autoPayFailureHeadingDomTestId)):e.includes(s.autoPayCancelURL)?(a.eventName="AUTOPAY",a.eventStatus="CANCEL",a.eventPayload.message=await o(s.autoPayCancelBodyDomTestId),a.eventPayload.heading=await o(s.autoPayCancelHeadingDomTestId)):a=null:e.includes(s.PASubstring)?e.includes(s.PASuccessURL)?(a.eventName="PA",a.eventStatus="SUCCESS",a.eventPayload.message=await o(s.PASuccessHeadingDomTestId)):e.includes(s.PAFailureURL)?(a.eventName="PA",a.eventStatus="FAILURE",a.eventPayload.message=await o(s.PAFailureBodyDomTestId),a.eventPayload.heading=await o(s.PAFailureHeadingDomTestId)):a=null:a=null,a};let o=async e=>{let t=0;for(;null===document.querySelector(`[data-testid=${e}]`)&&!(t>10);)t++,await new Promise((e=>setTimeout(e,500)));return document.querySelector(`[data-testid=${e}]`)?.textContent||""};t.postToApi=e=>{let t=i(e?.eventPayload?.sidecarUrl),a=new Map;a.set("Content-Type","application/json"),n(t?.requestUrl,a,e,t?.oAuthUrl,t?.clientId).then().catch()};let i=e=>{let t={requestUrl:null,oAuthUrl:null,clientId:null};return e?.includes("qlab02")?(t.requestUrl="https://qat03.api.t-mobile.com/dca/v1/web-events-listener/trigger/event",t.oAuthUrl="https://qat03.api.t-mobile.com/oauth2/v6/tokens",t.clientId="TCirVppVf8GjGD8IdBnKowpasqCQUesH"):e?.includes("qlab03")?(t.requestUrl="https://qat04.api.t-mobile.com/dca/v1/web-events-listener/trigger/event",t.oAuthUrl="https://qat04.api.t-mobile.com/oauth2/v6/tokens",t.clientId="TCirVppVf8GjGD8IdBnKowpasqCQUesH"):e?.includes("staging")?(t.requestUrl="https://qat02.api.t-mobile.com/dca/v1/web-events-listener/trigger/event",t.oAuthUrl="https://qat02.api.t-mobile.com/oauth2/v6/tokens",t.clientId="TCirVppVf8GjGD8IdBnKowpasqCQUesH"):(t.requestUrl="https://api.t-mobile.com/dca/v1/web-events-listener/trigger/event",t.oAuthUrl="https://api.t-mobile.com/oauth2/v6/tokens",t.clientId="dqcJHdtEXs5mCtvbohXZbjc6RB7Js4jG"),t}},605:(e,t,a)=>{console.log("Started Loading ca-tag"),window?.addEventListener("AfterTMOUrlChanged",(()=>{}));const{generateRequestBody:n,postToApi:s}=a(570),o=".lpc_slider-header__minimize-button-asset",i=window?.parent,d=window?.parent?.window?.document,r=d?.querySelector(o);let u=()=>{const e=window?.location?.href;n(e).then((t=>{null!=t&&(t.conversationId=c()||l(e),s(t))}))},c=()=>Array.from(d?.querySelectorAll("*[data-conv-id]"))?.pop()?.getAttribute("data-conv-id"),l=e=>new URL(e)?.searchParams?.get("cid"),m=e=>{i.postMessage({type:"sidecar",requestBody:e},parent?.origin)};window.addEventListener("message",(e=>{e?.data?.type&&"sidecar"===e?.data?.type&&(e.data.requestBody.conversationId=c(),e.data.requestBody.eventPayload.sidecarUrl=i?.location?.href,s(e.data.requestBody)),"close_button"==e?.data&&document?.querySelector(o).click()})),r&&"true"!==r.getAttribute("close-listener")&&(r.setAttribute("close-listener","true"),r.addEventListener("click",(e=>{e?.isTrusted&&(()=>{const e=Date.now();let t={conversationId:c(),eventName:"SIDECAR",eventStatus:"CLOSE",eventPayload:{heading:"",message:"",sidecarUrl:i?.location?.href},trackingId:e,timestamp:e};m(t)})()})));let y=history.pushState;history.pushState=function(){y.apply(history,arguments),u()},console.log("Ended Loading ca-tag")}},e=>{"use strict";return e.O(0,[898],(()=>{return t=605,e(e.s=t);var t})),e.O()}])}));