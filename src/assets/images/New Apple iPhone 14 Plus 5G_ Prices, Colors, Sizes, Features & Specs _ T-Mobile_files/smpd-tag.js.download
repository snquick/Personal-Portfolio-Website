!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["msg-v1-static-assets"]=e():t["msg-v1-static-assets"]=e()}(this,(function(){return(this.webpackChunkmsg_v1_static_assets=this.webpackChunkmsg_v1_static_assets||[]).push([[908],{762:(t,e,a)=>{const{getSMPDDigitalData:i,storeSMPDDigitalData:o}=a(526);e.updateCart=()=>{let t=i();if("undefined"!=typeof window){let e=window.digitalData;if(!e.cart)return;try{e?.cart?.product&&(t.digitalData.cart=e?.cart?.product.map((t=>t?.productInfo)))}catch{throw"Error when storing the latest cart information"}}o(t)}},285:(t,e,a)=>{const{getSMPDDigitalData:i,storeSMPDDigitalData:o}=a(526);e.updateCreditClass=()=>{let t=i();if("undefined"!=typeof window){let e=n("tmobglobalshareddata");t.digitalData.creditClass=r(e,"creditClass")}o(t)};let n=t=>{let e="",a=decodeURIComponent(document?.cookie).split(";");for(let i=0;i<a.length;i++){let o=a[i].trim();o.startsWith(t+"=")&&(e=o.slice(t.length+1))}return e},r=(t,e)=>{try{let a=JSON.parse(t);return a[e]?a[e]:""}catch{return""}};getFromDigitalData=()=>{}},187:(t,e,a)=>{const{getSMPDDigitalData:i,storeSMPDDigitalData:o}=a(526);e.updateGeolocation=()=>{let t=i();try{if("undefined"!=typeof window){const e=sessionStorage.getItem("IPC");if(null===e)throw"ipc is null";const a=JSON.parse(e),i=createGeolocation(a);t.digitalData.geolocation=i}}catch{throw"Error when storing geolocation"}o(t)},createGeolocation=t=>({latitude:t?.latitude?t.latitude:"",longitude:t?.longitude?t.longitude:"",country:t?.country?t.country:"",region:t?.region?t.region:"",city:t?.city?t.city:"",postal:t?.postal?t.postal:""})},886:(t,e,a)=>{const{getSMPDDigitalData:i,storeSMPDDigitalData:o}=a(526);e.updateJourney=()=>{let t=i();if("undefined"!=typeof window){let e=window?.location?.href;t?.digitalData?.customerJourney.unshift(e),t?.digitalData?.customerJourney?.length>5&&t?.digitalData.customerJourney.pop()}o(t)}},21:(t,e,a)=>{const{getSMPDDigitalData:i,storeSMPDDigitalData:o}=a(526);e.updateLastProduct=()=>{let t=i();try{if("undefined"!=typeof window){let e=window.digitalData;e?.product?.length>0&&(t.digitalData.lastProductBrowsed=e.product[0]?.productInfo)}}catch{throw"Error when storing latest product browsed"}o(t)}},526:(t,e)=>{e.getCustomerId=()=>{if("undefined"!=typeof window)try{return window.lpTag.custVars.customerId}catch{return""}return""},defaultData=()=>({expires:0,saved:!1,digitalData:{customerJourney:[],creditClass:"",lastProductBrowsed:null,cart:[],geolocation:null}}),e.getSMPDDigitalData=()=>{let t=new Date;t=t.getTime();let e=defaultData();if("undefined"!=typeof window)try{let a=localStorage.getItem("smpdDigitalData");if(e=JSON.parse(a),!e.digitalData||!e.expires||e.expires<t)throw"data expired or corrupt"}catch{return defaultData()}return e},e.storeSMPDDigitalData=t=>{const e=new Date;e.setHours(e.getHours()+2),t.expires=e.getTime(),"undefined"!=typeof window&&localStorage.setItem("smpdDigitalData",JSON.stringify(t))},e.setDigitalDataSaved=t=>{t.saved=!0,"undefined"!=typeof window&&e.storeSMPDDigitalData(t)}},704:(t,e,a)=>{const{updateCreditClass:i}=a(285),{updateJourney:o}=a(886),{updateLastProduct:n}=a(21),{updateCart:r}=a(762),{updateGeolocation:s}=a(187),{getSMPDDigitalData:d,getCustomerId:l,setDigitalDataSaved:c}=a(526),{httpPopPost:u}=a(602);let g=(t,e)=>{if("init"===t?.state){const t=l(),e=d(),a="https://api.t-mobile.com/msg/v1/enhanced-chat-data/tmoweb/tmoweb_"+t,i="mStXhzcPlJsG4YUcgxY5vDZ2opBR3dK4",o="https://api.t-mobile.com/oauth2/v6/tokens";let n=new Map;n.set("Content-Type","application/json"),!e?.saved&&t&&u(a,n,e.digitalData,o,i).then((t=>c(e)))}};window.TMOEVENTS?.AfterTMOUrlChanged&&(o(),i(),s()),window.TMOEVENTS?.TMOPDP&&n(),window.addEventListener("TMOPDP",(t=>{n()})),window.addEventListener("AfterTMOUrlChanged",(t=>{o(),i(),n(),r(),s()})),window.addEventListener("TMOCartProductChanged",(t=>{r()}));let p=5;const D=setInterval((()=>{p--,window.lpTag?.events&&(window.lpTag.events.bind("lpUnifiedWindow","state",g),clearInterval(D)),0===p&&clearInterval(D)}),2e3)}},t=>{"use strict";return t.O(0,[898],(()=>{return e=704,t(t.s=e);var e})),t.O()}])}));